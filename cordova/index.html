
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="shortcut icon" href="../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.6.4">
    
    
      
        <title>Añadiendo Cordova al stack - HMR Tutorial</title>
      
    
    
      <script src="../assets/javascripts/modernizr-1df76c4e58.js"></script>
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application-e2807e330f.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href=".." title="HMR Tutorial" class="md-icon md-icon--home md-header-nav__button">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
            
            Añadiendo Cordova al stack
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <div class="md-header-nav__source">
          
        </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    HMR Tutorial
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Inicio" class="md-nav__link">
      Inicio
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../bundle/" title="Creación del bundle" class="md-nav__link">
      Creación del bundle
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../webpackdevserver/" title="Instalación y configuración de webpack-dev-server" class="md-nav__link">
      Instalación y configuración de webpack-dev-server
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../babel/" title="Compilando desde ES6" class="md-nav__link">
      Compilando desde ES6
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../hrm/" title="Configurando Hot Module Replacement" class="md-nav__link">
      Configurando Hot Module Replacement
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../react/" title="OnsenUI, React, babel-preset-react y react-hot-loader" class="md-nav__link">
      OnsenUI, React, babel-preset-react y react-hot-loader
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../vendor/" title="Code Splitting" class="md-nav__link">
      Code Splitting
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
    <a href="./" title="Añadiendo Cordova al stack" class="md-nav__link md-nav__link--active">
      Añadiendo Cordova al stack
    </a>
    
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="anadiendo-cordova-al-stack">Añadiendo Cordova al stack</h1>
<p>Seguiremos adelante añadiendo Cordova al stack de herramientas. Teniendo instalado <a href="https://cordova.apache.org/docs/en/latest/guide/cli/"><code>cordova-cli</code></a>
crearemos un proyecto:</p>
<pre><code>cordova create hmrtutorial co.geomati.hmrtutorial HmrTutorial
</code></pre>
<p>Crearemos el proyecto fuera de nuestra carpeta de raiz, ya que de otra manera la <code>cordova-cli</code> dará un error. Después moveremos
la estructura del proyecto <code>cordova</code> creado a nuestro raíz, quedando de la siguiente manera:</p>
<p><img alt="" src="../_images/cordova_project.png" /></p>
<p>Atendiendo un poco a como funciona <code>cordova</code>, deberemos modificar ligeramente la estructura de nuestro proyecto para adecuarnos 
a esta tecnología. Un proyecto <code>cordova</code> dispone de una carpeta <code>www</code> donde se encuentra lo que será la aplicación que acabe
mostrandose en la <code>webView</code>. <code>cordova</code> durante el proceso de <code>build</code> copia el contenido de la carpeta <code>www</code> a la carpeta
<code>&lt;platform&gt;/assets/www</code> de la plataforma que estemos construyendo. Teniendo esto en cuenta, deberemos apuntar la salida de nuestro
<code>webpack</code> a la carpeta <code>www</code> eliminando la carpeta <code>dist</code>.</p>
<p>Eliminaremos <strong>todo</strong> el contenido de la carpeta <code>www</code> generado por <code>cordova</code>, y moveremos el <code>dist/index.html</code> a la carpeta
 <code>www</code>. Ahora modificaremos el <code>webpack.config.js</code> para que la salida apunte a esta carpeta <code>www</code>:</p>
<pre><code> output: {
     path: path.resolve(__dirname, 'www/js'),
     filename: '[name].js',
     publicPath: "/js/"
 },

 ...

devServer: {
    contentBase: path.join(__dirname, "www"),
    hot: true, // Tell the dev-server we're using HMR,
    compress: true,
    port: 3000,
    publicPath: "/js/"
},
</code></pre>
<p>Para probar de nuevo nuestra <code>App</code> pero esta vez en entorno móvil, primero deberemos añadir una <a href="https://cordova.apache.org/docs/en/latest/guide/cli/#add-platforms"><code>platform</code></a>
Añadiremos la plataforma de Android:</p>
<pre><code>$ cordova platform add android
</code></pre>
<p>Tras esto, veremos que se ha añadido contenido a la carpeta <code>platforms</code>. Si navegamos por el directorio <code>platforms/android/assets/www</code>
veremos que se ha replicado el contenido de nuestra carpeta <code>www</code> y además aparecen varios archivos y directorios que necesita
<code>cordova</code>.</p>
<p><img alt="" src="../_images/platforms.png" /></p>
<p>Si arrancamos la aplicación en un terminal:</p>
<pre><code>$ cordova run android
</code></pre>
<p>Tendremos nuestra <code>App</code> en el terminal:</p>
<p><img alt="" src="../_images/terminal.png" /></p>
<p>Si queremos debugar nuestra <code>App</code> corriendo en el terminal, utilizaremos las herramientas de desarrollo de Chrome. Navegamos a
la url <a href="chrome://inspect">chrome://inspect</a> y veremos que aparece nuestra <code>WebView</code>:</p>
<p><img alt="" src="../_images/device_inspect.png" /></p>
<p>si pulsamos sobre <code>inspect</code> podremos ver la consola de desarrollo para nuestra <code>App</code> cargada en el terminal</p>
<p><img alt="" src="../_images/app_inspect.png" /></p>
<p>¿Qué pasa si ahora modificamos el texto de nuestro botón?. Veremos que no sucede nada en el terminal, ya que lo que estamos
viendo es una versión "construida" de lo que existe en nuestra carpeta <code>www</code>, ya que en el <code>build</code> de <code>cordova</code> se copia 
el contenido a la carpeta de la plataforma y se empaqueta en el archivo que será instalado en el terminal. </p>
<p>Desde el inspect podremos debugar sobre el código fuente de nuestra <code>App</code>, pero cada cambio deberá ser primero compilado
por <code>webpack</code>:</p>
<pre><code>$ npm run build
</code></pre>
<p>y luego construido e instalado en el terminal:</p>
<pre><code>$ cordova run android
</code></pre>
<p>algo que puede ser sumamente tedioso en función del tamaño de nuestra app.</p>
<p>Pero, ¿no podemos desarrollar en web, donde tenemos las herramientas de desarrollo habituales y luego empaquetar para usar en el 
terminal?, si, en muchas casos esa es la estrategia a utilizar, pero cuando empezamos a hacer uso de <code>plugins</code> de <code>cordova</code>
nos surge el problema de que necesitaremos emuladores de esos plugins en entorno <code>web</code>, y en muchos casos estos no existen o 
estás desactualizados.</p>
<p>Hasta ahora lo más funcional es <a href="https://github.com/Microsoft/cordova-simulate"><code>Cordova-Simulate</code></a> que simula un entorno 
<code>cordova</code> en la web.</p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../vendor/" title="Code Splitting" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Code Splitting
              </span>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application-06a3e72efd.js"></script>
      <script>app.initialize({url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>